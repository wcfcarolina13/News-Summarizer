# Audio Compression Guide

WAV files generated by Kokoro TTS are uncompressed and very large (typically 85-137MB for a daily briefing). Converting to MP3 can reduce file size by ~90% with minimal quality loss.

## Quick Comparison

- **WAV**: Uncompressed, excellent quality, ~100-140MB per file
- **MP3 @ 128kbps**: Good quality, ~10-15MB per file (~90% reduction)
- **MP3 @ 192kbps**: Better quality, ~15-20MB per file (~85% reduction)
- **MP3 @ 256kbps**: Excellent quality, ~20-25MB per file (~80% reduction)

## Setup (Required for MP3 conversion)

Install ffmpeg:

**macOS:**
```bash
brew install ffmpeg
```

**Linux (Ubuntu/Debian):**
```bash
sudo apt install ffmpeg
```

**Windows:**
Download from https://ffmpeg.org/download.html and add to PATH

## Usage

### Option 1: Generate MP3 directly (Recommended)

The `make_audio_quality.py` script now supports MP3 output by default:

```bash
# Generate MP3 instead of WAV (default)
python make_audio_quality.py --voice af_sarah

# Use higher quality (larger file)
python make_audio_quality.py --voice af_sarah --bitrate 192k

# Force WAV output
python make_audio_quality.py --voice af_sarah --format wav
```

### Option 2: Convert existing WAV files

Use the `convert_to_mp3.py` utility to convert existing WAV files:

```bash
# Convert a single file
python convert_to_mp3.py audio_quality_2025-12-01.wav

# Convert all WAV files in a folder
python convert_to_mp3.py Week_49_2025/

# Use higher quality bitrate
python convert_to_mp3.py Week_49_2025/ -b 192k

# Convert and delete original WAV files
python convert_to_mp3.py Week_49_2025/ --delete-wav
```

### Option 3: Batch convert all weekly folders

```bash
# Convert all WAV files in all Week folders
for week in Week_*; do
    python convert_to_mp3.py "$week"
done

# Or with deletion of WAV files to save space
for week in Week_*; do
    python convert_to_mp3.py "$week" --delete-wav
done
```

## Bitrate Recommendations

- **128kbps**: Good for voice, ~90% size reduction (recommended)
- **192kbps**: Better quality, ~85% size reduction (good balance)
- **256kbps**: Excellent quality, ~80% size reduction (if file size less critical)
- **320kbps**: Maximum quality, ~75% size reduction (overkill for voice)

For voice content like news summaries, 128kbps is usually sufficient and provides excellent compression.

## GUI Integration (Future Enhancement)

The GUI could be updated to add:
- Format selection dropdown (WAV/MP3)
- Bitrate selection for MP3
- "Convert to MP3" button for existing files

## Troubleshooting

**Error: ffmpeg not found**
- Install ffmpeg using the instructions above
- Verify installation: `ffmpeg -version`

**MP3 sounds distorted**
- Try a higher bitrate (e.g., 192k or 256k)

**Still want WAV files**
- Use `--format wav` flag when generating audio
- WAV is best if you plan to do further audio processing
